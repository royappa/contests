<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from spoj.sphere.pl/problems/HOTLINE/ by HTTrack Website Copier/3.x [XR&CO'2005], Tue, 10 Jan 2006 04:48:45 GMT -->
<head>
<title>Sphere Online Judge (SPOJ)  - Problem HOTLINE</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<META NAME="Keywords" CONTENT="spoj, online, judge, problem, set, problemset, archive, ACM, Polish, Poland, contest, contester, task, tasks, ADA, Java, Pascal, C, C++, Whitespace, sphere, interest, group, python, ruby, icon, o'caml, caml, ocaml, perl, haskell, bf, brain, clips, prolog, fortran, asm, assembler, asembler, functional, esoteric, programming, languages">

<link href="https://spoj.sphere.pl/gfx/favicon" rel="shortcut icon" type="image/x-icon">

<link href="../../themes/skin3.css" rel="stylesheet" type="text/css" id="theme">
<style type="text/css">
<!--
.maintable {width: 755;} 
-->
</style>
<script type="text/javascript" language="javascript">
<!--
function UnCryptMailto(s) {
	var n=0;
	var r="";
	for(var i=0;i<s.length;i++) {		
		n=s.charCodeAt(i); 
		if (n>=8364) {n = 128;}
		r += String.fromCharCode(n+(2));	
	}
	return r;
}
function linkTo_UnCryptMailto(s)	{
	location.href=UnCryptMailto(s);
}
// -->
</script>

</head>
<body>
<center>
<table cellpadding="10" cellspacing="0" class="maintable" id="maintable">
<tr>
    <td colspan="2" class="header">
        <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
		<td class="headerleft"/>
		<td class="headercenter"><h1>Sphere Online Judge</h1></td>
		<td class="headerright"/>
	</tr>
	</table>
    </td>
</tr>
<tr><td class="menu" width="92" valign="top">
<form name="login"  action="http://spoj.sphere.pl/problems/HOTLINE/" method="post" 
	onsubmit="if(document.login.ssl.checked) document.login.action='https://spoj.sphere.pl/problems/HOTLINE/'" style="margin-bottom: 18px"> 
User: <input name="login_user" type="text" style="width: 85px;" class="form"><BR>
Password: <input name="password" type="password" style="width: 85px;" class="form"><BR>
<script language="javascript" type="text/javascript">
<!--
document.write('<input type="checkbox" name="ssl" id="ssl" checked>secure<br>');
//-->
</script>
<input name="submit" type="submit" value="Log In" class="button" style="width: 85px;">
</form><div class="menucmd"><a href="https://spoj.sphere.pl/register">register</a><br><br><a href="https://spoj.sphere.pl/status">status</a><br><a href="https://spoj.sphere.pl/submit">submit</a><br><a href="../classical/sort=0,start=250.html">problems</a><br><br><a href="https://spoj.sphere.pl/">news</a><br><a href="https://spoj.sphere.pl/contests">contests</a><br><a href="https://spoj.sphere.pl/info">info</a><br><a href="https://spoj.sphere.pl/ranks/">ranks</a><br><br><a href="https://spoj.sphere.pl/forum">forum</a><br><a href="https://spoj.sphere.pl/help">help</a><br><a href="https://spoj.sphere.pl/links">links</a><br><hr></div>Server time:<br>2006-01-10<br>05:47:14<a href="../classical/sort=0,start=250.html"></a><br><br>
<form method="get" action="https://spoj.sphere.pl/search/" class="form" style="width:90px">
<input type="text" name="query" style="width:85px" maxlength=255 value="" class="form"><br>
<input type="submit" value="Search" style="width:85px" class="form" title="Search site"><br>
&nbsp;<a href="https://spoj.sphere.pl/search/problems=on,users=on,contests=on" title="More search options"><small>advanced...</small></a>
</form></td><td class="content" width="99%"><table class="problems" width="100%">
<tr class="navigation">
<td><a href="https://spoj.sphere.pl/submit/HOTLINE/">Submit</a></td>
<td><a href="https://spoj.sphere.pl/status/HOTLINE/">All submissions</a></td>
<td><a href="https://spoj.sphere.pl/ranks/HOTLINE/">Best solutions</a></td>
<td><a href="https://spoj.sphere.pl/problems/HOTLINE.ps">PS</a></td>
<td><a href="https://spoj.sphere.pl/problems/HOTLINE.pdf">PDF</a></td>
<td><a href="../classical/sort=0,start=250.html">Back to list</a></td>
</tr>
</table>

<div class="prob">

<h2>SPOJ Problem Set </h2>
<h1>13. Hotline</h1>
<h2>Problem code: HOTLINE</h2>
<p align="justify">
<P>
Every customer sometimes needs help with new and unusual products. Therefore,
hotline service is very important for every company. We need a&nbsp;single phone
number where the customer can always find a&nbsp;friendly voice ready to help with
anything. On the other hand, many people are needed to serve as hotline
operators, and human resources are always very expensive. Moreover, it is not
easy to pretend "friendly voice" at 4am and explain to a&nbsp;drunken man that you
are really unable to give him the number to House of Parliament. It was
also found that some of the questions repeat very often and it is very
annoying to answer them again and again.

<P>
ACM is a&nbsp;modern company, wanting to solve its hotline problem. They want
to decrease the number of human operators by creating a&nbsp;complex software
system that would be able to answer most common questions. The customer's
voice is analysed by a&nbsp;special Voice Recognition Module (VRM) and converted
to a&nbsp;plain text. The text is then taken by an Artificial Automatic Adaptive
Answering Algorithm (AAAAA). The most common questions are recognised and
answered automatically. The replies are then converted to a&nbsp;sound by
Text-to-Speech Module (TTS).

<P>
You are to write the AAAAA module. Because your algorithm should be adaptive,
it has no explicit knowledge base. But it must be able to listen to sentences
in English and remember the mentioned facts. Whenever the question is asked
about such a&nbsp;fact, the system has to answer it properly. The VRM and TTS
modules are already implemented, so the input and output of AAAAA will be in
the text form.

<P>
<H3>Input</h3>

<P>
There is a&nbsp;single positive integer <VAR>T</var> on the first line of input. It stands
for the number of dialogues to follow. Each dialogue consists of zero or more
lines, each of them containing one sentence: either statement or question. The
statement ends with a&nbsp;dot character (<TT>.</tt>), the question ends with
a&nbsp;question mark (<TT>?</tt>). No statement will appear more than once, however
the questions can be repeated. There is one extra line after each dialogue.
That line ends with an&nbsp;exclamation mark (<TT>!</tt>).

<P>
Sentences can contain words, spaces and punctuation characters (such as
commas, colons, semicolons etc.). All words contain only letters of English
alphabet and are case-sensitive. That means the same word is always written
the same way, usually in lowercase. Acronyms, names and some other words can
begin with capital letters. For simplicity, all sentences begin with
a&nbsp;lowercase letter. Only if the first word should be written with a&nbsp;capital,
the sentence begins with a&nbsp;capital letter. There are no unneeded spaces
between words. No line will have more than 100 characters. There will be at
most 100 statements per each test case.

<P>

<h6 align=left>Statements</h6>

<P>
Each statement has one of the following two forms ( _ denotes a&nbsp;space):
<BR>
<I>subject</i>  _<I>predicate</i>[<TT>s</tt>] [ _<I>object</i>] <TT>.</tt>
<BR>
<I>subject</i>  _<TT>don't</tt>|<TT>doesn't</tt>  _<I>predicate</i> [ _<I>object</i>] <TT>.</tt>

<P>
The square brackets mark an&nbsp;optional part, the vertical line two possible
variants. Subject is a&nbsp;single word, noun or pronoun in singular. Predicate is
a&nbsp;verb (single word) denoting some activity. Object can be any text. Object
does not contain any dots. Any pair "verb + object" determines unique
activity. The same verb with different objects makes different independent
activities, i.e. the different and independent meaning of the sentence.
Sentence without any object can be considered as sentence with an&nbsp;empty
object. The verb without an&nbsp;object has different and independent meaning than
the same verb with any non-empty object.

<P>
The first variant of sentence denotes a&nbsp;positive statement. The word
"<I>predicate</i>[<TT>s</tt>]" means verb that matches the subject of the sentence.
If the subject is "<TT>I</tt>" or "<TT>you</tt>", the verb has the same form as the
infinitive. With any other subject, the letter "<TT>s</tt>" is appended on the
end of the verb. Assume there are no irregular verbs.

<P>
The second variant is a&nbsp;negative statement. Verb "<TT>don't</tt>" or
"<TT>doesn't</tt>" must also match the subject. The form "<TT>don't</tt>" is used
with either "<TT>I</tt>" or "<TT>you</tt>", "<TT>doesn't</tt>" is used in any other
case.

<P>
A&nbsp;special generic subject "<TT>everybody</tt>" can be used. It means the activity
holds for any subject. Other special subject is "<TT>nobody</tt>". Such sentence
also holds for any subject, but its meaning is negative. Both of these generic
subjects can be used with the first variant only (without "<TT>doesn't</tt>").
The sentence "<TT>nobody likes something</tt>" is exactly equal to
"<TT>everybody doesn't like something</tt>", except the latter form will never
occur in the input.

<P>

<h6 align=left>Questions</h6>

<P>
Each question has one of the following three forms:
<div align=left>
<DL COMPACT>
<DT>1.
<DD><TT>do</tt>|<TT>does</tt>  _<I>subject</i>  _<I>predicate</i> [ _object] <TT>?</tt>
<DT>2.
<DD><TT>who</tt>  _<I>predicate</i><TT>s</tt> [ _<I>object</i>] <TT>?</tt>
<DT>3.
<DD><TT>what</tt>  _<TT>do</tt>|<TT>does</tt>  _<I>subject</i> <TT>do</tt> <TT>?</tt>
</dl>
</div>
<P>
The word "<TT>do</tt>|<TT>does</tt>" always matches the subject ("<TT>do I?</tt>",
"<TT>do you?</tt>", "<TT>does</tt> any other subject?"). In the second
type of question, predicate always matches the word "<TT>who</tt>", i.e. the
"<TT>s</tt>" is always appended. Generic subjects cannot be used in questions.

<P>
<H3>Output</h3>

<P>
For each dialogue, your program must output the line <TT>Dialogue #</tt><VAR>D</var><TT>:</tt>,
where <VAR>D</var> is the sequence number of dialogue, starting with 1. Then print
exactly three lines for every question: the first line repeats the question,
the second line contains the answer, and the third line is empty. Print
nothing for statements. After each dialogue, print the same line with
an&nbsp;exclamation mark that was in the input. Then print one extra empty line.
Empty line contains a&nbsp;new-line character only.

<P>
The answer must be properly formated to be accepted by a&nbsp;TTS module. Only the
statements appearing in the input before the answer are used for the
corresponding reply. If there is any contradiction among statements, the
reply is always <TT>I am abroad.</tt>. If the question and statements consider
the special subject "<TT>you</tt>", it must be replaced with "<TT>I</tt>" in the
answer. If the question considers special subject "<TT>I</tt>", it must be
replaced with "<TT>you</tt>" in the answer. The verb must always match the
subject of the sentence. The exact form of the correct answer depends on the
type of question.

<P>

<h6 align=left>1.&nbsp;does subject predicate [object] ?</h6>

<P>
If there is any positive statement about the mentioned subject (or
generic subject "<TT>everybody</tt>"), predicate and object, the answer is:
<BR>
<TT>yes,</tt>  _<I>subject</i>  _<I>predicate</i>[<TT>s</tt>] [ _<I>object</i>] <TT>.</tt>

<P>
If there is any negative statement about the mentioned subject (or
generic subject "<TT>nobody</tt>"), predicate and object, the answer is:
<BR>
<TT>no,</tt>  _<I>subject</i>  _<TT>don't</tt>|<TT>doesn't</tt>  _<I>predicate</i> [ _<I>object</i>] <TT>.</tt>

<P>
Otherwise, the answer is:
<TT>maybe.</tt>

<P>
Subject in the answer is always the same subject as the subject of the
question.

<P>

<h6 align=left>2.&nbsp;who predicates [object] ?</h6>

<P>
If there is a&nbsp;positive statement considering any subject, the specified
predicate and object, the answer is:
<BR>
<I>subject</i>  _<I>predicate</i>[<TT>s</tt>] [ _<I>object</i>] <TT>.</tt>

<P>
If two or more subjects match the activity, replace the subject in the answer
with enumeration of all such subjects, in the same order as the corresponding
statements have appeared in the input. Subjects are separated with comma and
space, last two subjects are separated with the word "<TT>and</tt>".
If "<TT>everybody</tt>" belongs to the group of enumerated subjects, do not
enumerate subjects, and print "<TT>everybody</tt>" only. If the enumeration
contains at least two subjects, the predicate matches the plural subject
(i.e. verb is without trailing "<TT>s</tt>"), otherwise it matches the only
subject.
<BR>
<I>subject1</i> <TT>,</tt>  _<I>subject2</i>  _<TT>and</tt>  _<I>subject3</i> <I>predicate</i> [ _<I>object</i>] <TT>.</tt>

<P>
If there is a&nbsp;negative statement considering the generic subject "nobody",
the specified predicate and object, the answer is:
<BR>
<I>nobody</i>  _<I>predicate</i><TT>s</tt> [ _<I>object</i>] <TT>.</tt>

<P>
Otherwise, the answer is:
<TT>I don't know.</tt>

<P>

<h6 align=left>3.&nbsp;what does subject do ?</h6>

<P>
If there are one or more sentences (both positive and negative) considering
the specified subject (or a&nbsp;generic subject "<TT>everybody</tt>" or "<TT>nobody</tt>"), all
verbs and objects from such sentences must be included in a&nbsp;reply in the same
order as the corresponding sentences have appeared in the input. No
verb-object pair can be included more than once (the eventual second
appearance must be skipped). The verb-object pairs are separated by a&nbsp;comma
followed by a&nbsp;space, the last verb is separated by a&nbsp;comma and the word
"<TT>and</tt>". Please note the comma is printed here although there was no comma
when separating the subjects in the previous type of answer (see above). The
negative answers have the same form as the statements, that means the verb
"<TT>don't</tt>" or "<TT>doesn't</tt>" is used:
<BR>
<I>subject</i> [ _<TT>don't</tt>|<TT>doesn't</tt>]  _<I>predicate1</i>[<TT>s</tt>] [ _<I>object1</i>] <TT>,</tt>
<BR>
[ _<TT>don't</tt>|<TT>doesn't</tt>]  _<I>predicate2</i>[<TT>s</tt>] [ _<I>object2</i>] <TT>,</tt>
<BR>
_<TT>and</tt> [ _<TT>don't</tt>|<TT>doesn't</tt>]  _<I>predicate3</i>[<TT>s</tt>] [ _<I>object3</i>] <TT>.</tt>
<BR>
<I>subject</i> [ _<TT>don't</tt>|<TT>doesn't</tt>]  _<I>predicate1</i>[<TT>s</tt>] [ _<I>object1</i>] <TT>,</tt>
<BR>
_<TT>and</tt> [ _<TT>don't</tt>|<TT>doesn't</tt>]  _<I>predicate2</i>[<TT>s</tt>] [ _<I>object2</i>] <TT>.</tt>
<BR>
<I>subject</i> [ _<TT>don't</tt>|<TT>doesn't</tt>]  _<I>predicate</i>[<TT>s</tt>] [ _<I>object</i>] <TT>.</tt>

<P>
Otherwise, the answer is:
<TT>I don't know.</tt>

<h3>Example</h3>
<p>Sample Input:</p>

<PRE>
<tt>1
I like hotdogs.
nobody likes to work.
everybody smiles.
what do I do?
who smiles?
what do you do?
does Joe smile?
do I like to work?
everybody hurts sometimes.
who walks there?
Michal walks there.
who walks there?
what does Michal do?
do you understand?
nobody walks there.
do you understand now?
bye!
</tt></pre>

<p>Sample Output:</p>

<PRE>
<tt>Dialogue #1:
what do I do?
you like hotdogs, don't like to work, and smile.

who smiles?
everybody smiles.

what do you do?
I don't like to work, and smile.

does Joe smile?
yes, Joe smiles.

do I like to work?
no, you don't like to work.

who walks there?
I don't know.

who walks there?
Michal walks there.

what does Michal do?
Michal doesn't like to work, smiles, hurts sometimes, and walks there.

do you understand?
maybe.

do you understand now?
I am abroad.

bye!
</tt></pre>

<hr>
<table border=0 cellspacing=0 cellpadding=0 align=left>
<tr><td width=130>Added by:</td><td><a href="https://spoj.sphere.pl/search/'Adrian%20Kosowski'">Adrian Kosowski</a></td></tr>
<tr><td>Date:</td><td>2004-05-09</td></tr>
<tr><td>Time limit:</td><td>2s
</td></tr>
<tr><td>Source limit:</td><td>50000B</td></tr>
<tr><td>Resource:</td><td>ACM Central European Programming Contest, Prague 2000</td></tr></table>
</div></td>
</tr>

<tr>
<td colspan="2" class="footer">

<script language="javascript" type="text/javascript">
<!--
function swapSheet(sheet, caller) {
    document.getElementById('theme').href=sheet;
    document.cookie="css_0="+sheet+"; path=/;";
    caller.href="#bottom";
}

function setWidth(w, caller) {
    document.getElementById('maintable').style.width=w;
    document.cookie="res="+w+"; path=/;";
    caller.href="#bottom";
}
//-->

</script>
        <table width="100%">
    <tr>
	<td align="left">
            <a href="http://www.pg.gda.pl/eng.html"><IMG src="https://spoj.sphere.pl/gfx/logo-pg" alt="www.pg.gda.pl" border=0 height=36 width=44></a>&nbsp;
            <a href="http://www.eti.pg.gda.pl/"><IMG src="https://spoj.sphere.pl/gfx/logo-eti" alt="www.eti.pg.gda.pl" border=0 height=36 width=44></a>
	</td>
	<td align="center">
	    page size:
	    <a href="https://spoj.sphere.pl/?res=755"  onClick="setWidth('755', this)">800x600</a>
	    <a href="https://spoj.sphere.pl/?res=980"  onClick="setWidth('980', this)">1024x768</a>
	    <a href="https://spoj.sphere.pl/?res=100%" onClick="setWidth('100%', this)">Full</a>
	    &nbsp;&nbsp;
	    theme:
	    <a href="../../indexb6a4.html?css=/themes/skin1.css" onClick="swapSheet('../../themes/skin1.css', this)">olive</a>
	    <a href="../../index3840.html?css=/themes/skin2.css" onClick="swapSheet('../../themes/skin2.css', this)">banana</a>
	    <a href="../../index80f0.html?css=/themes/skin3.css" onClick="swapSheet('../../themes/skin3.css', this)">plum</a>
	    <br>
	    <a href="http://sphere.pl/?id=66">spoj team at sphere</a> &copy; 2004-05 all rights reserved
	</td>
	<td align="right">
            <a href="http://task.gda.pl/english/"><IMG src="https://spoj.sphere.pl/gfx/logo-task" alt="task.gda.pl" border=0 height=36 width=44></a>&nbsp;
            <a href="http://sphere.pl/"><IMG src="https://spoj.sphere.pl/gfx/logo-sphere" alt="sphere.pl" border=0 height=32></a>
	</td>
    </tr>
    </table>
    </tr></table>
</center>
</body>

<!-- Mirrored from spoj.sphere.pl/problems/HOTLINE/ by HTTrack Website Copier/3.x [XR&CO'2005], Tue, 10 Jan 2006 04:48:45 GMT -->
</html>