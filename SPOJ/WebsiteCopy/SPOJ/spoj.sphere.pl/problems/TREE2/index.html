<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from spoj.sphere.pl/problems/TREE2/ by HTTrack Website Copier/3.x [XR&CO'2005], Tue, 10 Jan 2006 04:51:40 GMT -->
<head>
<title>Sphere Online Judge (SPOJ)  - Problem TREE2</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<META NAME="Keywords" CONTENT="spoj, online, judge, problem, set, problemset, archive, ACM, Polish, Poland, contest, contester, task, tasks, ADA, Java, Pascal, C, C++, Whitespace, sphere, interest, group, python, ruby, icon, o'caml, caml, ocaml, perl, haskell, bf, brain, clips, prolog, fortran, asm, assembler, asembler, functional, esoteric, programming, languages">

<link href="https://spoj.sphere.pl/gfx/favicon" rel="shortcut icon" type="image/x-icon">

<link href="../../themes/skin3.css" rel="stylesheet" type="text/css" id="theme">
<style type="text/css">
<!--
.maintable {width: 755;} 
-->
</style>
<script type="text/javascript" language="javascript">
<!--
function UnCryptMailto(s) {
	var n=0;
	var r="";
	for(var i=0;i<s.length;i++) {		
		n=s.charCodeAt(i); 
		if (n>=8364) {n = 128;}
		r += String.fromCharCode(n+(2));	
	}
	return r;
}
function linkTo_UnCryptMailto(s)	{
	location.href=UnCryptMailto(s);
}
// -->
</script>

</head>
<body>
<center>
<table cellpadding="10" cellspacing="0" class="maintable" id="maintable">
<tr>
    <td colspan="2" class="header">
        <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
		<td class="headerleft"/>
		<td class="headercenter"><h1>Sphere Online Judge</h1></td>
		<td class="headerright"/>
	</tr>
	</table>
    </td>
</tr>
<tr><td class="menu" width="92" valign="top">
<form name="login"  action="http://spoj.sphere.pl/problems/TREE2/" method="post" 
	onsubmit="if(document.login.ssl.checked) document.login.action='https://spoj.sphere.pl/problems/TREE2/'" style="margin-bottom: 18px"> 
User: <input name="login_user" type="text" style="width: 85px;" class="form"><BR>
Password: <input name="password" type="password" style="width: 85px;" class="form"><BR>
<script language="javascript" type="text/javascript">
<!--
document.write('<input type="checkbox" name="ssl" id="ssl" checked>secure<br>');
//-->
</script>
<input name="submit" type="submit" value="Log In" class="button" style="width: 85px;">
</form><div class="menucmd"><a href="https://spoj.sphere.pl/register">register</a><br><br><a href="https://spoj.sphere.pl/status">status</a><br><a href="https://spoj.sphere.pl/submit">submit</a><br><a href="../classical/sort=7,start=0.html">problems</a><br><br><a href="https://spoj.sphere.pl/">news</a><br><a href="https://spoj.sphere.pl/contests">contests</a><br><a href="https://spoj.sphere.pl/info">info</a><br><a href="https://spoj.sphere.pl/ranks/">ranks</a><br><br><a href="https://spoj.sphere.pl/forum">forum</a><br><a href="https://spoj.sphere.pl/help">help</a><br><a href="https://spoj.sphere.pl/links">links</a><br><hr></div>Server time:<br>2006-01-10<br>05:48:03<a href="../classical/sort=7,start=0.html"></a><br><br>
<form method="get" action="https://spoj.sphere.pl/search/" class="form" style="width:90px">
<input type="text" name="query" style="width:85px" maxlength=255 value="" class="form"><br>
<input type="submit" value="Search" style="width:85px" class="form" title="Search site"><br>
&nbsp;<a href="https://spoj.sphere.pl/search/problems=on,users=on,contests=on" title="More search options"><small>advanced...</small></a>
</form></td><td class="content" width="99%"><table class="problems" width="100%">
<tr class="navigation">
<td><a href="https://spoj.sphere.pl/submit/TREE2/">Submit</a></td>
<td><a href="https://spoj.sphere.pl/status/TREE2/">All submissions</a></td>
<td><a href="https://spoj.sphere.pl/ranks/TREE2/">Best solutions</a></td>
<td><a href="https://spoj.sphere.pl/problems/TREE2.ps">PS</a></td>
<td><a href="https://spoj.sphere.pl/problems/TREE2.pdf">PDF</a></td>
<td><a href="../classical/sort=7,start=0.html">Back to list</a></td>
</tr>
</table>

<div class="prob">

<h2>SPOJ Problem Set </h2>
<h1>88. Which is Next</h1>
<h2>Problem code: TREE2</h2>
<p align="justify">
<p>
	Every computer science student knows binary trees. Here is one of many possible 
	definitions of binary trees. Binary trees are defined inductively. A binary 
	tree t is either an external node (leaf) <img src="WDOT.png" alt="o"> 
	or an ordered pair t = (t<sub>1</sub>, t<sub>2</sub>) representing an internal 
	node <img src="BDOT.png" alt="*"> with two subtrees attached, left 
	subtree t<sub>1</sub> and right subtree t<sub>2</sub>. Under this definition 
	the number of nodes in any binary tree is odd. Given an odd integer n let B(n) 
	denote the set of all binary trees with n nodes, both internal and external. 
	For instance B(1) consists of only one tree <img src="WDOT.png" alt="o">, 
	B(3) = {(<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">)} 
	and B(5) = {(<img src="WDOT.png" alt="o">, (<img src="WDOT.png" alt="o">,
	<img src="WDOT.png" alt="o">)), ((<img src="WDOT.png" alt="o">,
	<img src="WDOT.png" alt="o">), <img src="WDOT.png" alt="o">)}. 
	The trees of B(5) are depicted in the figure below.
</p>
<img src="TREE2.png" alt="The trees B(5)">
<p>
	Denote by |t| the number of nodes in a tree t. Given a tree t we define its 
	unique integer identifier N (t) as follows:
</p>
<div align="justify">
	<ul>
		<li>
			N (<img src="WDOT.png" alt="o">) = 0
		<li>
			N (t<sub>1</sub>, t<sub>2</sub>) = 2<sup>|t<sub>1</sub>|+|t<sub>2</sub>|</sup> + 
			2<sup>|t<sub>2</sub>|</sup> * N(t<sub>1</sub>) +N (t<sub>2</sub>)</li>
	</ul>
</div>
<p>
	For instance, N (<img src="WDOT.png" alt="o">,<img src="WDOT.png" alt="o">) 
	= 2<sup>2</sup> + 2<sup>1</sup> * 0 + 0 = 4, N (<img src="WDOT.png" alt="o">, 
	(<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">)) 
	= 2<sup>4</sup> + 2<sup>3</sup> * 0 + 4 = 20,<br>N ((<img src="WDOT.png" alt="o">,
	<img src="WDOT.png" alt="o">), <img src="WDOT.png" alt="o">) 
	= 2<sup>4</sup> + 2<sup>1</sup> * 4 + 0 = 24.
</p>
<p>
Consider the following linear order on all binary trees:
</p>
<p>
1) <img src="WDOT.png" alt="o"> &lt; = t<br>
2) (t<sub>1</sub>, t<sub>2</sub>) &lt; = (u<sub>1</sub>, u<sub>2</sub>) when t<sub>1</sub>
&lt; u<sub>1</sub>, or t<sub>1</sub> = u<sub>1</sub> and t<sub>2</sub> &lt; = u<sub>2</sub>
</p>
<p>
In this order a single leaf <img src="WDOT.png" alt="o"> is the 
smallest tree and given two nonleaf trees, the smaller one is that with the 
smaller left tree, if the left subtrees are different, and that with the 
smaller right subtree, otherwise. Hence for instance (<img src="WDOT.png" alt="o">, 
(<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">)) 
&lt; ((<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">),
<img src="WDOT.png" alt="o">), since we have <img src="WDOT.png" alt="o">
&lt; (<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">). 
Assume now that the trees in B(n) were sorted using the relation &lt; =. Then, 
for each tree t in B(n) we define the successor of t as the tree that 
immediately follows t in B(n). If t is the largest one in B(n) then the 
successor of t is the smallest tree in set B(n). For instance, the successor of 
(<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">) 
in B(3) is the same tree (<img src="WDOT.png" alt="o">, <img src="WDOT.png" alt="o">) 
and the successor of (<img src="WDOT.png" alt="o">, (<img src="WDOT.png" alt="o">,
<img src="WDOT.png" alt="o">)) in B(5) is ((<img src="WDOT.png" alt="o">,
<img src="WDOT.png" alt="o">), <img src="WDOT.png" alt="o">). 
Given the integer identifier of some tree t can you give the identifier of the 
successor of t in B(|t|)?
</P>
<h3>Task</h3>
<p>Write a program that:</p>
<div align="justify">
	<ul>
		<li>
		reads the identifier of some binary tree t,
		<li>
		computes the identifier of the successor of t in B(|t|),
		<li>
			writes the result.</li>
	</ul>
</div>
<h3>Input</h3>
<p>
	The input begins with the integer t, the number of test cases. Then t test 
	cases follow.
</p>
<p>
	For each test case the first and only line of the input contains one integer n 
	(0 &lt;= n &lt; = 2<sup>30</sup>) - the identifier of some binary tree t.
</p>
<h3>Output</h3>
<p>
	For each test case the first and only line of the output should contain one 
	integer s - the identifier of the successor of t in B(|t|).
</p>
<h3>Example</h3>
<pre><b><tt>Sample input:</tt></b>
1
20
 
<b><tt>Sample output:</tt></b>
24
</pre>


<hr>
<table border=0 cellspacing=0 cellpadding=0 align=left>
<tr><td width=130>Added by:</td><td><a href="https://spoj.sphere.pl/search/'Adrian%20Kosowski'">Adrian Kosowski</a></td></tr>
<tr><td>Date:</td><td>2004-06-26</td></tr>
<tr><td>Time limit:</td><td>2s
</td></tr>
<tr><td>Source limit:</td><td>50000B</td></tr>
<tr><td>Resource:</td><td>ACM Central European Programming Contest, Warsaw 2003</td></tr></table>
</div></td>
</tr>

<tr>
<td colspan="2" class="footer">

<script language="javascript" type="text/javascript">
<!--
function swapSheet(sheet, caller) {
    document.getElementById('theme').href=sheet;
    document.cookie="css_0="+sheet+"; path=/;";
    caller.href="#bottom";
}

function setWidth(w, caller) {
    document.getElementById('maintable').style.width=w;
    document.cookie="res="+w+"; path=/;";
    caller.href="#bottom";
}
//-->

</script>
        <table width="100%">
    <tr>
	<td align="left">
            <a href="http://www.pg.gda.pl/eng.html"><IMG src="https://spoj.sphere.pl/gfx/logo-pg" alt="www.pg.gda.pl" border=0 height=36 width=44></a>&nbsp;
            <a href="http://www.eti.pg.gda.pl/"><IMG src="https://spoj.sphere.pl/gfx/logo-eti" alt="www.eti.pg.gda.pl" border=0 height=36 width=44></a>
	</td>
	<td align="center">
	    page size:
	    <a href="https://spoj.sphere.pl/?res=755"  onClick="setWidth('755', this)">800x600</a>
	    <a href="https://spoj.sphere.pl/?res=980"  onClick="setWidth('980', this)">1024x768</a>
	    <a href="https://spoj.sphere.pl/?res=100%" onClick="setWidth('100%', this)">Full</a>
	    &nbsp;&nbsp;
	    theme:
	    <a href="../../indexb6a4.html?css=/themes/skin1.css" onClick="swapSheet('../../themes/skin1.css', this)">olive</a>
	    <a href="../../index3840.html?css=/themes/skin2.css" onClick="swapSheet('../../themes/skin2.css', this)">banana</a>
	    <a href="../../index80f0.html?css=/themes/skin3.css" onClick="swapSheet('../../themes/skin3.css', this)">plum</a>
	    <br>
	    <a href="http://sphere.pl/?id=66">spoj team at sphere</a> &copy; 2004-05 all rights reserved
	</td>
	<td align="right">
            <a href="http://task.gda.pl/english/"><IMG src="https://spoj.sphere.pl/gfx/logo-task" alt="task.gda.pl" border=0 height=36 width=44></a>&nbsp;
            <a href="http://sphere.pl/"><IMG src="https://spoj.sphere.pl/gfx/logo-sphere" alt="sphere.pl" border=0 height=32></a>
	</td>
    </tr>
    </table>
    </tr></table>
</center>
</body>

<!-- Mirrored from spoj.sphere.pl/problems/TREE2/ by HTTrack Website Copier/3.x [XR&CO'2005], Tue, 10 Jan 2006 04:51:40 GMT -->
</html>