<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from spoj.sphere.pl/problems/BULK/ by HTTrack Website Copier/3.x [XR&CO'2005], Tue, 10 Jan 2006 04:48:44 GMT -->
<head>
<title>Sphere Online Judge (SPOJ)  - Problem BULK</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<META NAME="Keywords" CONTENT="spoj, online, judge, problem, set, problemset, archive, ACM, Polish, Poland, contest, contester, task, tasks, ADA, Java, Pascal, C, C++, Whitespace, sphere, interest, group, python, ruby, icon, o'caml, caml, ocaml, perl, haskell, bf, brain, clips, prolog, fortran, asm, assembler, asembler, functional, esoteric, programming, languages">

<link href="https://spoj.sphere.pl/gfx/favicon" rel="shortcut icon" type="image/x-icon">

<link href="../../themes/skin3.css" rel="stylesheet" type="text/css" id="theme">
<style type="text/css">
<!--
.maintable {width: 755;} 
-->
</style>
<script type="text/javascript" language="javascript">
<!--
function UnCryptMailto(s) {
	var n=0;
	var r="";
	for(var i=0;i<s.length;i++) {		
		n=s.charCodeAt(i); 
		if (n>=8364) {n = 128;}
		r += String.fromCharCode(n+(2));	
	}
	return r;
}
function linkTo_UnCryptMailto(s)	{
	location.href=UnCryptMailto(s);
}
// -->
</script>

</head>
<body>
<center>
<table cellpadding="10" cellspacing="0" class="maintable" id="maintable">
<tr>
    <td colspan="2" class="header">
        <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
		<td class="headerleft"/>
		<td class="headercenter"><h1>Sphere Online Judge</h1></td>
		<td class="headerright"/>
	</tr>
	</table>
    </td>
</tr>
<tr><td class="menu" width="92" valign="top">
<form name="login"  action="http://spoj.sphere.pl/problems/BULK/" method="post" 
	onsubmit="if(document.login.ssl.checked) document.login.action='https://spoj.sphere.pl/problems/BULK/'" style="margin-bottom: 18px"> 
User: <input name="login_user" type="text" style="width: 85px;" class="form"><BR>
Password: <input name="password" type="password" style="width: 85px;" class="form"><BR>
<script language="javascript" type="text/javascript">
<!--
document.write('<input type="checkbox" name="ssl" id="ssl" checked>secure<br>');
//-->
</script>
<input name="submit" type="submit" value="Log In" class="button" style="width: 85px;">
</form><div class="menucmd"><a href="https://spoj.sphere.pl/register">register</a><br><br><a href="https://spoj.sphere.pl/status">status</a><br><a href="https://spoj.sphere.pl/submit">submit</a><br><a href="../classical/sort=0,start=250.html">problems</a><br><br><a href="https://spoj.sphere.pl/">news</a><br><a href="https://spoj.sphere.pl/contests">contests</a><br><a href="https://spoj.sphere.pl/info">info</a><br><a href="https://spoj.sphere.pl/ranks/">ranks</a><br><br><a href="https://spoj.sphere.pl/forum">forum</a><br><a href="https://spoj.sphere.pl/help">help</a><br><a href="https://spoj.sphere.pl/links">links</a><br><hr></div>Server time:<br>2006-01-10<br>05:47:13<a href="../classical/sort=0,start=250.html"></a><br><br>
<form method="get" action="https://spoj.sphere.pl/search/" class="form" style="width:90px">
<input type="text" name="query" style="width:85px" maxlength=255 value="" class="form"><br>
<input type="submit" value="Search" style="width:85px" class="form" title="Search site"><br>
&nbsp;<a href="https://spoj.sphere.pl/search/problems=on,users=on,contests=on" title="More search options"><small>advanced...</small></a>
</form></td><td class="content" width="99%"><table class="problems" width="100%">
<tr class="navigation">
<td><a href="https://spoj.sphere.pl/submit/BULK/">Submit</a></td>
<td><a href="https://spoj.sphere.pl/status/BULK/">All submissions</a></td>
<td><a href="https://spoj.sphere.pl/ranks/BULK/">Best solutions</a></td>
<td><a href="https://spoj.sphere.pl/problems/BULK.ps">PS</a></td>
<td><a href="https://spoj.sphere.pl/problems/BULK.pdf">PDF</a></td>
<td><a href="../classical/sort=0,start=250.html">Back to list</a></td>
</tr>
</table>

<div class="prob">

<h2>SPOJ Problem Set </h2>
<h1>7. The Bulk!</h1>
<h2>Problem code: BULK</h2>
<p align="justify">
<P>

ACM uses a new special technology of building its transceiver
stations. This technology is called <EM>Modular Cuboid Architecture</em>
(<EM>MCA</em>) and is covered by a patent of Lego company. All parts of
the transceiver are shipped in unit blocks that have the form of cubes of
exactly the same size. The cubes can be then connected to each other. The MCA
is modular architecture, that means we can select preferred transceiver
configuration and buy only those components we need.

<P>
The cubes must be always connected "face-to-face", i.e. the whole side of one
cube is connected to the whole side of another cube. One cube can be thus
connected to at most six other units. The resulting equipment, consisting of
unit cubes is called <EM>The Bulk</em> in the communication technology slang.

<P>
Sometimes, an old and unneeded bulk is condemned, put into a storage place,
and replaced with a new one. It was recently found that ACM has many of such
old bulks that just occupy space and are no longer needed. The director has
decided that all such bulks must be disassembled to single pieces to save
some space. Unfortunately, there is no documentation for the old bulks and
nobody knows the exact number of pieces that form them. You are to write
a computer program that takes the bulk description and computes the number of
unit cubes.


<P>
Each bulk is described by its faces (sides). A special X-ray based machine
was constructed that is able to localise all faces of the bulk in the space,
even the inner faces, because the bulk can be partially hollow (it can
contain empty spaces inside). But any bulk must be connected (i.e. it cannot
drop into two pieces) and composed of whole unit cubes.

<P>
<H3>Input</h3>

<P>
There is a single positive integer <VAR>T</var> on the first line of input (equal to about 1000). It stands
for the number of bulks to follow. Each bulk description begins with a line
containing single positive integer <VAR>F</var>, 6 <= <VAR>F</var> <= 250, stating the
number of faces. Then there are <VAR>F</var> lines, each containing one face
description. All faces of the bulk are always listed, in any order. Any
face may be divided into several distinct parts and described like if it was
more faces. Faces do not overlap. Every face has one inner
side and one outer side. No side can be "partially inner and partially
outer".


<P>
Each face is described on a single line. The line begins with an integer
number <VAR>P</var> stating the number of points that determine the face, 4 <= <VAR>P</var> <= 200. Then there are 3 <VAR>x P</var> 
numbers, coordinates of the points. Each point is described by three
coordinates <VAR>X</var>,<VAR>Y</var>,<VAR>Z</var> (0 <= <VAR>X</var>,<VAR>Y</var>,<VAR>Z</var> <= 1000) separated by spaces. The points
are separated from each other and from the number <VAR>P</var> by two space
characters. These additional spaces were added to make the input more human
readable. The face can be constructed by connecting the points in the
specified order, plus connecting the last point with the first one.


<P>
The face is always composed of "unit squares", that means every edge runs
either in <VAR>X</var>, <VAR>Y</var> or <VAR>Z</var>-axis direction. If we take any two neighbouring
points <VAR>X</var><SUB>1</sub>,<VAR>Y</var><SUB>1</sub>,<VAR>Z</var><SUB>1</sub> and 

<VAR>X</var><SUB>2</sub>,<VAR>Y</var><SUB>2</sub>,<VAR>Z</var><SUB>2</sub>, then the points will always differ in
exactly one of the three coordinates. I.e. it is either 
<VAR>X</var><SUB>1</sub> <> <VAR>X</var><SUB>2</sub>,
or 
<VAR>Y</var><SUB>1</sub> <> <VAR>Y</var><SUB>2</sub>, or 

<VAR>Z</var><SUB>1</sub> <> <VAR>Z</var><SUB>2</sub>, other two coordinates are the same. Every
face lies in an orthogonal plane, i.e. exactly one coordinate is always the
same for all points of the face. The face outline will never touch nor cross
itself.

<P>
<H3>Output</h3>

<P>
Your program must print a single line for every test case. The line must
contain the sentence <TT>The bulk is composed of </tt><VAR>V</var><TT> units.</tt>, where <VAR>V</var> 

is the volume of the bulk.

<h3>Example</h3>

<p>Sample Input:</p><PRE><tt>2
12
4  10 10 10  10 10 20  10 20 20  10 20 10
4  20 10 10  20 10 20  20 20 20  20 20 10
4  10 10 10  10 10 20  20 10 20  20 10 10
4  10 20 10  10 20 20  20 20 20  20 20 10
4  10 10 10  10 20 10  20 20 10  20 10 10
5  10 10 20  10 20 20  20 20 20  20 15 20  20 10 20
4  14 14 14  14 14 16  14 16 16  14 16 14
4  16 14 14  16 14 16  16 16 16  16 16 14
4  14 14 14  14 14 16  16 14 16  16 14 14
4  14 16 14  14 16 16  16 16 16  16 16 14
4  14 14 14  14 16 14  16 16 14  16 14 14
4  14 14 16  14 16 16  16 16 16  16 14 16
12
4  20 20 30  20 30 30  30 30 30  30 20 30
4  10 10 10  10 40 10  40 40 10  40 10 10
6  10 10 20  20 10 20  20 30 20  30 30 20  30 40 20  10 40 20
6  20 10 20  20 20 20  30 20 20  30 40 20  40 40 20  40 10 20
4  10 10 10  40 10 10  40 10 20  10 10 20
4  10 40 10  40 40 10  40 40 20  10 40 20
4  20 20 20  30 20 20  30 20 30  20 20 30
4  20 30 20  30 30 20  30 30 30  20 30 30
4  10 10 10  10 40 10  10 40 20  10 10 20
4  40 10 10  40 40 10  40 40 20  40 10 20
4  20 20 20  20 30 20  20 30 30  20 20 30
4  30 20 20  30 30 20  30 30 30  30 20 30
</tt>
</pre>

<p>Sample Output:</p><PRE><tt>The bulk is composed of 992 units.
The bulk is composed of 10000 units.</tt>
</pre>
<b>Warning: large Input/Output data, be careful with certain languages</b>

<hr>
<table border=0 cellspacing=0 cellpadding=0 align=left>
<tr><td width=130>Added by:</td><td><a href="https://spoj.sphere.pl/search/'Adrian%20Kosowski'">Adrian Kosowski</a></td></tr>
<tr><td>Date:</td><td>2004-05-08</td></tr>
<tr><td>Time limit:</td><td>7s
</td></tr>
<tr><td>Source limit:</td><td>50000B</td></tr>
<tr><td>Resource:</td><td>ACM Central European Programming Contest, Prague 2000</td></tr></table>
</div></td>
</tr>

<tr>
<td colspan="2" class="footer">

<script language="javascript" type="text/javascript">
<!--
function swapSheet(sheet, caller) {
    document.getElementById('theme').href=sheet;
    document.cookie="css_0="+sheet+"; path=/;";
    caller.href="#bottom";
}

function setWidth(w, caller) {
    document.getElementById('maintable').style.width=w;
    document.cookie="res="+w+"; path=/;";
    caller.href="#bottom";
}
//-->

</script>
        <table width="100%">
    <tr>
	<td align="left">
            <a href="http://www.pg.gda.pl/eng.html"><IMG src="https://spoj.sphere.pl/gfx/logo-pg" alt="www.pg.gda.pl" border=0 height=36 width=44></a>&nbsp;
            <a href="http://www.eti.pg.gda.pl/"><IMG src="https://spoj.sphere.pl/gfx/logo-eti" alt="www.eti.pg.gda.pl" border=0 height=36 width=44></a>
	</td>
	<td align="center">
	    page size:
	    <a href="https://spoj.sphere.pl/?res=755"  onClick="setWidth('755', this)">800x600</a>
	    <a href="https://spoj.sphere.pl/?res=980"  onClick="setWidth('980', this)">1024x768</a>
	    <a href="https://spoj.sphere.pl/?res=100%" onClick="setWidth('100%', this)">Full</a>
	    &nbsp;&nbsp;
	    theme:
	    <a href="../../indexb6a4.html?css=/themes/skin1.css" onClick="swapSheet('../../themes/skin1.css', this)">olive</a>
	    <a href="../../index3840.html?css=/themes/skin2.css" onClick="swapSheet('../../themes/skin2.css', this)">banana</a>
	    <a href="../../index80f0.html?css=/themes/skin3.css" onClick="swapSheet('../../themes/skin3.css', this)">plum</a>
	    <br>
	    <a href="http://sphere.pl/?id=66">spoj team at sphere</a> &copy; 2004-05 all rights reserved
	</td>
	<td align="right">
            <a href="http://task.gda.pl/english/"><IMG src="https://spoj.sphere.pl/gfx/logo-task" alt="task.gda.pl" border=0 height=36 width=44></a>&nbsp;
            <a href="http://sphere.pl/"><IMG src="https://spoj.sphere.pl/gfx/logo-sphere" alt="sphere.pl" border=0 height=32></a>
	</td>
    </tr>
    </table>
    </tr></table>
</center>
</body>

<!-- Mirrored from spoj.sphere.pl/problems/BULK/ by HTTrack Website Copier/3.x [XR&CO'2005], Tue, 10 Jan 2006 04:48:44 GMT -->
</html>